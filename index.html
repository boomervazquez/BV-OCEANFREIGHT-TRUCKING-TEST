<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAAA7CAYAAACg5MKJAAAACXBIWXMAAC4jAAAuIwF4pT92AAAGB0lEQVR4nO1d/3HaPhRXuf7LNRsUTdBkgsAESScgTOBkgpAJgicImaB0giYTlE4A3YCeF/ieuI9z4n2Fec+WZAP63PUacsZ5kj96vyV/UgkniyLTl0qpC6XUpp+vlnXGmQhyYigybQjxrJS6BTlKbJRSeT9fTSUjTgQ5IUBj/CLEoDCaZNTPVxvOyHvnPqmnAmiOQ+QwMC">
<title>Ocean Freight & Trucking Rate Calculator</title>
<style>
:root{
  --bg:#f0f4f8;
  --card:#ffffff;
  --text:#1e293b;
  --muted:#64748b;
  --gray:#475569;
  --dark-gray:#1e293b;
  --light-gray:#f1f5f9;
  --orange:#f97316;
  --orange-light:#fed7aa;
  --ok:#10b981;
  --err:#ef4444;
}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background:linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
  background-attachment:fixed;
  color:var(--text);
  min-height:100vh;
}
.wrap{
  max-width:1100px;
  margin:32px auto;
  padding:0 16px;
}
header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:24px;
  background:rgba(255,255,255,0.95);
  padding:20px 24px;
  border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.1);
  backdrop-filter:blur(10px);
}
.title{
  font-size:clamp(20px,3vw,28px);
  font-weight:800;
  color:var(--dark-gray);
  display:flex;
  align-items:center;
  gap:12px;
}
.title::before{
  content:"ðŸš¢";
  font-size:1.3em;
}
.logo-img{
  height:50px;
  margin-right:8px;
}
.badge{
  padding:6px 14px;
  border-radius:999px;
  background:linear-gradient(135deg, #f97316 0%, #fb923c 100%);
  color:#fff;
  font-weight:700;
  font-size:12px;
  box-shadow:0 4px 12px rgba(249,115,22,.3);
  text-transform:uppercase;
  letter-spacing:0.5px;
}
.card{
  background:rgba(255,255,255,0.95);
  border:none;
  border-radius:20px;
  padding:28px;
  box-shadow:0 20px 40px rgba(0,0,0,.1);
  margin-bottom:24px;
  backdrop-filter:blur(10px);
}
.grid{display:grid;gap:18px;grid-template-columns:repeat(12,1fr)}
.col-4{grid-column:span 4}.col-6{grid-column:span 6}.col-12{grid-column:span 12}
@media(max-width:780px){.col-4,.col-6{grid-column:span 12}}
label{
  font-weight:700;
  color:var(--gray);
  display:flex;
  align-items:center;
  gap:8px;
  margin-bottom:8px;
  font-size:14px;
  text-transform:uppercase;
  letter-spacing:0.5px;
}
label::before{
  font-size:18px;
}
.label-origin::before{content:"ðŸŒ"}
.label-dest::before{content:"ðŸ“"}
.input-wrapper{position:relative}
input,select{
  width:100%;
  border:2px solid #e2e8f0;
  border-radius:12px;
  padding:14px 16px;
  font-size:15px;
  background:#fff;
  box-sizing:border-box;
  transition:all 0.3s ease;
  font-weight:500;
}
input:focus,select:focus{
  border-color:var(--orange);
  outline:none;
  box-shadow:0 0 0 4px rgba(249,115,22,.1);
  transform:translateY(-2px);
}
.autocomplete-items{
  position:absolute;
  border:2px solid #e2e8f0;
  border-top:none;
  z-index:99;
  top:100%;
  left:0;
  right:0;
  max-height:240px;
  overflow-y:auto;
  background:#fff;
  border-radius:0 0 12px 12px;
  box-shadow:0 10px 20px rgba(0,0,0,.1);
}
.autocomplete-items div{
  padding:12px 16px;
  cursor:pointer;
  border-bottom:1px solid #f1f5f9;
  transition:all 0.2s ease;
  font-weight:500;
}
.autocomplete-items div:hover{
  background:linear-gradient(90deg, #fff7ed 0%, #ffedd5 100%);
  padding-left:20px;
}
.row{display:flex;gap:12px;flex-wrap:wrap}
.btn{
  background:linear-gradient(135deg, var(--orange) 0%, #fb923c 100%);
  color:#fff;
  border:none;
  border-radius:12px;
  padding:14px 24px;
  font-weight:700;
  cursor:pointer;
  transition:all 0.3s ease;
  box-shadow:0 4px 12px rgba(249,115,22,.3);
  text-transform:uppercase;
  letter-spacing:0.5px;
  font-size:14px;
}
.btn:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 20px rgba(249,115,22,.4);
}
.btn.secondary{
  background:#fff;
  color:var(--orange);
  border:2px solid var(--orange);
  box-shadow:none;
}
.btn.secondary:hover{
  background:var(--orange);
  color:#fff;
}
.mini{
  font-size:13px;
  color:var(--muted);
  margin-top:6px;
  font-weight:500;
}
.result{
  border-top:2px dashed #e2e8f0;
  margin-top:24px;
  padding-top:24px;
}
.rate-table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  margin:16px 0;
  overflow:hidden;
  border-radius:12px;
  box-shadow:0 2px 8px rgba(0,0,0,.05);
}
.rate-table th,.rate-table td{
  padding:14px 16px;
  text-align:left;
}
.rate-table thead{
  background:linear-gradient(135deg, var(--gray) 0%, var(--dark-gray) 100%);
  color:#fff;
}
.rate-table th{
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.5px;
  font-size:13px;
}
.rate-table tbody tr{
  background:#fff;
  transition:all 0.2s ease;
}
.rate-table tbody tr:nth-child(even){
  background:#f8fafc;
}
.rate-table tbody tr:hover{
  background:#fff7ed;
  transform:scale(1.01);
}
.rate-table td{
  font-family:ui-monospace,monospace;
  font-weight:600;
  border-bottom:1px solid #f1f5f9;
}
.rate-table tbody tr:last-child td{
  border-bottom:none;
}
.section-title{
  font-weight:800;
  color:var(--gray);
  margin:24px 0 12px 0;
  font-size:18px;
  display:flex;
  align-items:center;
  gap:10px;
  text-transform:uppercase;
  letter-spacing:0.5px;
}
.section-title::before{
  font-size:24px;
}
.section-ocean::before{content:"ðŸŒŠ"}
.section-truck::before{content:"ðŸšš"}
.section-total::before{content:"ðŸ’°"}
.toggle{
  display:flex;
  align-items:center;
  gap:12px;
  margin:20px 0;
  padding:16px;
  background:linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%);
  border-radius:12px;
  border:2px solid var(--orange-light);
}
.toggle input[type="checkbox"]{
  width:20px;
  height:20px;
  cursor:pointer;
  accent-color:var(--orange);
}
.toggle label{
  margin:0;
  cursor:pointer;
  font-weight:700;
  color:var(--gray);
  font-size:15px;
}
.log{
  font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
  font-size:12px;
  background:#0f172a;
  color:#cbd5e1;
  padding:16px;
  border-radius:12px;
  max-height:300px;
  overflow:auto;
  margin-top:12px;
  box-shadow:inset 0 2px 8px rgba(0,0,0,.3);
  line-height:1.6;
}
.stat{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px;
  border-bottom:1px solid #f1f5f9;
  background:#fff;
  margin:4px 0;
  border-radius:8px;
  transition:all 0.2s ease;
}
.stat:hover{
  background:#f8fafc;
  padding-left:20px;
}
.stat:last-child{border-bottom:none}
.stat .mini{
  font-weight:700;
  color:var(--gray);
  text-transform:uppercase;
  letter-spacing:0.5px;
  font-size:12px;
}
.stat > span:last-child{
  font-weight:700;
  color:var(--orange);
  font-size:16px;
}
*, *::before, *::after { box-sizing: border-box; }
details{
  margin-top:20px;
  padding:16px;
  background:rgba(255,255,255,0.5);
  border-radius:12px;
  border:2px solid #e2e8f0;
}
details summary{
  cursor:pointer;
  font-weight:700;
  color:var(--gray);
  padding:8px;
  transition:all 0.2s ease;
}
details summary:hover{
  color:var(--orange);
  padding-left:12px;
}
details[open] summary{
  margin-bottom:12px;
  color:var(--orange);
}
</style>
</head>
<body>
<div class="wrap">
<header>
<div style="display:flex;align-items:center;gap:16px;">
<img src="data:image/webp;base64,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" alt="K-Apex Logo" style="height:50px;">
<div class="title">Ocean Freight & Trucking Rate Calculator</div>
</div>
<div class="badge" id="statusBadge">Ready</div>
</header>

<div class="card">
<div class="grid">
<div class="col-6">
<label for="origin" class="label-origin">Origin Port</label>
<div class="input-wrapper">
<input id="origin" placeholder="Start typing origin..." autocomplete="off"/>
<div id="originAutocomplete" class="autocomplete-items" style="display:none"></div>
</div>
<div class="mini">Select from available ocean freight origins</div>
</div>

<div class="col-6">
<label for="destination" class="label-dest">Destination</label>
<div class="input-wrapper">
<input id="destination" placeholder="Start typing destination..." autocomplete="off"/>
<div id="destAutocomplete" class="autocomplete-items" style="display:none"></div>
</div>
<div class="mini" id="destHint">Select port or IPI destination</div>
</div>

<div class="col-12">
<div class="toggle">
<input type="checkbox" id="doorMove"/>
<label for="doorMove">Door Move (includes trucking from nearest facility)</label>
</div>
</div>

<div class="col-12 row">
<button class="btn" id="calcBtn">Calculate Rates</button>
<button class="btn secondary" id="resetBtn">Reset</button>
</div>

<div id="results" style="display:none">
<div class="result">
<div class="section-title section-ocean">Ocean Freight Rates</div>
<table class="rate-table" id="oceanRatesTable">
<thead>
<tr>
<th>Equipment Type</th>
<th>Rate (USD)</th>
</tr>
</thead>
<tbody id="oceanRatesBody"></tbody>
</table>

<div id="truckingSection" style="display:none">
<div class="section-title section-truck">Trucking Details</div>
<div class="stat"><span class="mini">Selected Facility</span><span id="facilityName">â€”</span></div>
<div class="stat"><span class="mini">Type</span><span id="facilityType">â€”</span></div>
<div class="stat"><span class="mini">Round-trip Distance (mi)</span><span id="truckMiles">â€”</span></div>
<div class="stat"><span class="mini">Trucking Cost (USD)</span><span id="truckCost">â€”</span></div>

<div class="section-title section-total">All-In Rates (Ocean + Trucking)</div>
<table class="rate-table">
<thead>
<tr>
<th>Equipment Type</th>
<th>Ocean</th>
<th>Trucking</th>
<th>Total</th>
</tr>
</thead>
<tbody id="totalRatesBody"></tbody>
</table>
</div>
</div>
</div>

<div class="col-12">
<details>
<summary><strong>Diagnostics â€¢ click to expand</strong></summary>
<div class="log" id="log"></div>
</details>
</div>
</div>
</div>
</div>

<script>
// Utilities
const $ = (id) => document.getElementById(id);
const logEl = $("log");
const badge = $("statusBadge");
const setBadge = (txt, cls) => { badge.textContent = txt; badge.style.color = cls || "var(--orange)"; };
const log = (msg) => { logEl.textContent += msg + "\\n"; logEl.scrollTop = logEl.scrollHeight; };
const round = (n, p = 2) => Number.parseFloat(n).toFixed(p);

function haversineMiles(a, b) {
  const R = 3958.7613, toRad = d => d * Math.PI / 180;
  const dLat = toRad(b.lat - a.lat), dLon = toRad(b.lon - a.lon);
  const lat1 = toRad(a.lat), lat2 = toRad(b.lat);
  const h = Math.sin(dLat / 2) ** 2 + Math.cos(lat1) * Math.cos(lat2) * Math.sin(dLon / 2) ** 2;
  return 2 * R * Math.asin(Math.sqrt(h));
}

// Ocean freight rate database (compact JSON format)
const OCEAN_RATES = {"NANSHA":{"ATLANTA, GA":[4820,6030,6030,7660],"CHICAGO, IL":[4290,5360,5360,6810],"MEMPHIS, TN":[3050,3810,3810,4840],"HOUSTON, TX":[3280,4100,4100,5210],"DETROIT, MI":[4280,5350,5350,6790],"CINCINNATI, OH":[5330,6660,6660,8460],"KANSAS CITY, KS":[4120,5150,5150,6540],"NEW YORK, NY":[3930,4910,4910,6240],"LA/LB, CA PORTS":[4390,5490,5490,6970],"DALLAS UPRR":[3270,4090,4090,5190],"COLUMBUS, OH":[4950,6190,6190,7860],"LOUISVILLE, KY":[5410,6760,6760,8590],"OMAHA, NE / COUNCIL BLUFFS, IA":[4720,5900,5900,7490],"SAVANNAH, GA":[5130,6410,6410,8140],"CHARLOTTE, NC":[4630,5790,5790,7350],"DALLAS BNSF":[3390,4240,4240,5380],"ST.LOUIS, MO":[4800,6000,6000,7620],"NASHVILLE, TN":[3610,4510,4510,5730],"NEW ORLEANS, LA":[5330,6660,6660,8460],"WILMINGTON, NC":[4730,5910,5910,7510],"NORFOLK, VA":[4080,5100,5100,6480],"BALTIMORE, MD":[4480,5600,5600,7110],"OAKLAND, CA":[3620,4520,4520,5740],"CHARLESTON, SC":[4620,5770,5770,7330],"BOSTON, MA":[3220,4020,4020,5110],"SALT LAKE CITY, UT":[4640,5800,5800,7370],"CLEVELAND, OH":[4150,5190,5190,6590],"MOBILE, AL":[3980,4980,4980,6320],"GREER, SC":[3550,4440,4440,5640],"JACKSONVILLE, FL":[3630,4540,4540,5770],"MINNEAPOLIS, MN / ST. PAUL, MN":[5420,6770,6770,8600],"TAMPA, FL":[4890,6110,6110,7760],"MIAMI, FL":[5100,6380,6380,8100],"PORTLAND OR":[4910,6140,6140,7800],"PORT EVERGLADES, FL":[4200,5250,5250,6670],"SEATTLE WA":[4330,5410,5410,6870],"TACOMA WA":[4250,5310,5310,6740],"PITTSBURGH, PA":[4220,5280,5280,6710],"DENVER":[4640,5800,5800,7370],"INDIANAPOLIS, IN":[3670,4590,4590,5830],"BUFFALO, NY":[3660,4580,4580,5820],"PHILADELPHIA, PA":[3130,3910,3910,4970],"WORCESTER, MA":[4830,6040,6040,7670],"EL PASO/SANTA TERESA, NM":[4230,5290,5290,6720]},"YANTIAN":{"ATLANTA, GA":[4620,5770,5770,7330],"CHICAGO, IL":[3200,4000,4000,5080],"MEMPHIS, TN":[4700,5880,5880,7470],"HOUSTON, TX":[4220,5280,5280,6710],"DETROIT, MI":[3910,4890,4890,6210],"CINCINNATI, OH":[4640,5800,5800,7370],"KANSAS CITY, KS":[4510,5640,5640,7160],"NEW YORK, NY":[4820,6030,6030,7660],"LA/LB, CA PORTS":[3960,4950,4950,6290],"DALLAS UPRR":[3460,4320,4320,5490],"COLUMBUS, OH":[3860,4830,4830,6130],"LOUISVILLE, KY":[5170,6460,6460,8200],"OMAHA, NE / COUNCIL BLUFFS, IA":[4930,6160,6160,7820],"SAVANNAH, GA":[5190,6490,6490,8240],"CHARLOTTE, NC":[3920,4900,4900,6220],"DALLAS BNSF":[3230,4040,4040,5130],"ST.LOUIS, MO":[3450,4310,4310,5470],"NASHVILLE, TN":[3140,3930,3930,4990],"NEW ORLEANS, LA":[3410,4260,4260,5410],"WILMINGTON, NC":[3520,4400,4400,5590],"NORFOLK, VA":[3770,4710,4710,5980],"BALTIMORE, MD":[3310,4140,4140,5260],"OAKLAND, CA":[3710,4640,4640,5890],"CHARLESTON, SC":[4350,5440,5440,6910],"BOSTON, MA":[4060,5070,5070,6440],"SALT LAKE CITY, UT":[4240,5300,5300,6730],"CLEVELAND, OH":[3420,4280,4280,5440],"MOBILE, AL":[4740,5930,5930,7530],"GREER, SC":[5420,6770,6770,8600],"JACKSONVILLE, FL":[4690,5860,5860,7440],"MINNEAPOLIS, MN / ST. PAUL, MN":[3620,4530,4530,5750],"TAMPA, FL":[3230,4040,4040,5130],"MIAMI, FL":[3210,4010,4010,5090],"PORTLAND OR":[4120,5150,5150,6540],"PORT EVERGLADES, FL":[5340,6680,6680,8480],"SEATTLE WA":[4300,5370,5370,6820],"TACOMA WA":[4620,5770,5770,7330],"PITTSBURGH, PA":[4550,5690,5690,7230],"DENVER":[4270,5340,5340,6780],"INDIANAPOLIS, IN":[3340,4180,4180,5310],"BUFFALO, NY":[3500,4370,4370,5550],"PHILADELPHIA, PA":[4240,5300,5300,6730],"WORCESTER, MA":[4670,5840,5840,7420],"EL PASO/SANTA TERESA, NM":[3330,4160,4160,5280]},"SHEKOU":{"ATLANTA, GA":[4540,5680,5680,7210],"CHICAGO, IL":[4340,5420,5420,6880],"MEMPHIS, TN":[3580,4480,4480,5690],"HOUSTON, TX":[3300,4120,4120,5230],"DETROIT, MI":[3080,3850,3850,4890],"CINCINNATI, OH":[4090,5110,5110,6490],"KANSAS CITY, KS":[5270,6590,6590,8370],"NEW YORK, NY":[5360,6700,6700,8510],"LA/LB, CA PORTS":[3590,4490,4490,5700],"DALLAS UPRR":[5340,6670,6670,8470],"COLUMBUS, OH":[4990,6240,6240,7920],"LOUISVILLE, KY":[5070,6340,6340,8050],"OMAHA, NE / COUNCIL BLUFFS, IA":[4560,5700,5700,7240],"SAVANNAH, GA":[3800,4750,4750,6030],"CHARLOTTE, NC":[4410,5510,5510,7000],"DALLAS BNSF":[5000,6250,6250,7940],"ST.LOUIS, MO":[3760,4700,4700,5970],"NASHVILLE, TN":[4630,5790,5790,7350],"NEW ORLEANS, LA":[5260,6570,6570,8340],"WILMINGTON, NC":[3990,4990,4990,6340],"NORFOLK, VA":[5090,6360,6360,8080],"BALTIMORE, MD":[3180,3970,3970,5040],"OAKLAND, CA":[4010,5010,5010,6360],"CHARLESTON, SC":[3790,4740,4740,6020],"BOSTON, MA":[3290,4110,4110,5220],"SALT LAKE CITY, UT":[3900,4880,4880,6200],"CLEVELAND, OH":[3780,4720,4720,5990],"MOBILE, AL":[5390,6740,6740,8560],"GREER, SC":[4600,5750,5750,7300],"JACKSONVILLE, FL":[3340,4170,4170,5300],"MINNEAPOLIS, MN / ST. PAUL, MN":[3240,4050,4050,5140],"TAMPA, FL":[3370,4210,4210,5350],"MIAMI, FL":[3490,4360,4360,5540],"PORTLAND OR":[4440,5550,5550,7050],"PORT EVERGLADES, FL":[5340,6680,6680,8480],"SEATTLE WA":[3380,4230,4230,5370],"TACOMA WA":[4070,5090,5090,6460],"PITTSBURGH, PA":[5020,6270,6270,7960],"DENVER":[4380,5470,5470,6950],"INDIANAPOLIS, IN":[5260,6570,6570,8340],"BUFFALO, NY":[4660,5820,5820,7390],"PHILADELPHIA, PA":[3220,4020,4020,5110],"WORCESTER, MA":[5100,6370,6370,8090],"EL PASO/SANTA TERESA, NM":[4710,5890,5890,7480]},"XIAMEN":{"ATLANTA, GA":[3080,3850,3850,4890],"CHICAGO, IL":[4860,6080,6080,7720],"MEMPHIS, TN":[4700,5880,5880,7470],"HOUSTON, TX":[4590,5740,5740,7290],"DETROIT, MI":[4660,5830,5830,7400],"CINCINNATI, OH":[3360,4200,4200,5330],"KANSAS CITY, KS":[3400,4250,4250,5400],"NEW YORK, NY":[4770,5960,5960,7570],"LA/LB, CA PORTS":[4620,5780,5780,7340],"DALLAS UPRR":[4090,5110,5110,6490],"COLUMBUS, OH":[4860,6080,6080,7720],"LOUISVILLE, KY":[3630,4540,4540,5770],"OMAHA, NE / COUNCIL BLUFFS, IA":[4970,6210,6210,7890],"SAVANNAH, GA":[5410,6760,6760,8590],"CHARLOTTE, NC":[4100,5120,5120,6500],"DALLAS BNSF":[4980,6230,6230,7910],"ST.LOUIS, MO":[4980,6220,6220,7900],"NASHVILLE, TN":[5220,6520,6520,8280],"NEW ORLEANS, LA":[3740,4680,4680,5940],"WILMINGTON, NC":[5340,6680,6680,8480],"NORFOLK, VA":[4170,5210,5210,6620],"BALTIMORE, MD":[5120,6400,6400,8130],"OAKLAND, CA":[4700,5870,5870,7450],"CHARLESTON, SC":[3300,4120,4120,5230],"BOSTON, MA":[3740,4670,4670,5930],"SALT LAKE CITY, UT":[4500,5620,5620,7140],"CLEVELAND, OH":[4870,6090,6090,7730],"MOBILE, AL":[4780,5970,5970,7580],"GREER, SC":[3290,4110,4110,5220],"JACKSONVILLE, FL":[3490,4360,4360,5540],"MINNEAPOLIS, MN / ST. PAUL, MN":[3260,4070,4070,5170],"TAMPA, FL":[3500,4380,4380,5560],"MIAMI, FL":[4000,5000,5000,6350],"PORTLAND OR":[3240,4050,4050,5140],"PORT EVERGLADES, FL":[4300,5380,5380,6830],"SEATTLE WA":[3500,4380,4380,5560],"TACOMA WA":[3780,4730,4730,6010],"PITTSBURGH, PA":[3600,4500,4500,5720],"DENVER":[4570,5710,5710,7250],"INDIANAPOLIS, IN":[5290,6610,6610,8390],"BUFFALO, NY":[4630,5790,5790,7350],"PHILADELPHIA, PA":[5400,6750,6750,8570],"WORCESTER, MA":[4010,5010,5010,6360],"EL PASO/SANTA TERESA, NM":[5130,6410,6410,8140]},"SHANGHAI":{"ATLANTA, GA":[4340,5430,5430,6900],"CHICAGO, IL":[3380,4230,4230,5370],"MEMPHIS, TN":[4650,5810,5810,7380],"HOUSTON, TX":[4550,5690,5690,7230],"DETROIT, MI":[3400,4250,4250,5400],"CINCINNATI, OH":[3120,3900,3900,4950],"KANSAS CITY, KS":[5360,6700,6700,8510],"NEW YORK, NY":[3800,4750,4750,6030],"LA/LB, CA PORTS":[4350,5440,5440,6910],"DALLAS UPRR":[3210,4010,4010,5090],"COLUMBUS, OH":[3720,4650,4650,5910],"LOUISVILLE, KY":[4540,5680,5680,7210],"OMAHA, NE / COUNCIL BLUFFS, IA":[3360,4200,4200,5330],"SAVANNAH, GA":[5370,6710,6710,8520],"CHARLOTTE, NC":[4320,5400,5400,6860],"DALLAS BNSF":[3560,4450,4450,5650],"ST.LOUIS, MO":[4610,5760,5760,7320],"NASHVILLE, TN":[3940,4920,4920,6250],"NEW ORLEANS, LA":[5420,6780,6780,8610],"WILMINGTON, NC":[3620,4530,4530,5750],"NORFOLK, VA":[4330,5410,5410,6870],"BALTIMORE, MD":[5400,6750,6750,8570],"OAKLAND, CA":[3520,4400,4400,5590],"CHARLESTON, SC":[3960,4950,4950,6290],"BOSTON, MA":[5280,6600,6600,8380],"SALT LAKE CITY, UT":[4350,5440,5440,6910],"CLEVELAND, OH":[3370,4210,4210,5350],"MOBILE, AL":[4370,5460,5460,6930],"GREER, SC":[3160,3950,3950,5020],"JACKSONVILLE, FL":[3450,4310,4310,5470],"MINNEAPOLIS, MN / ST. PAUL, MN":[3980,4970,4970,6310],"TAMPA, FL":[3920,4900,4900,6220],"MIAMI, FL":[3330,4160,4160,5280],"PORTLAND OR":[4580,5720,5720,7260],"PORT EVERGLADES, FL":[3660,4570,4570,5800],"SEATTLE WA":[3730,4660,4660,5920],"TACOMA WA":[3340,4180,4180,5310],"PITTSBURGH, PA":[4580,5730,5730,7280],"DENVER":[4000,5000,5000,6350],"INDIANAPOLIS, IN":[3230,4040,4040,5130],"BUFFALO, NY":[4050,5060,5060,6430],"PHILADELPHIA, PA":[4460,5580,5580,7090],"WORCESTER, MA":[3610,4510,4510,5730],"EL PASO/SANTA TERESA, NM":[4570,5710,5710,7250]},"NINGBO":{"ATLANTA, GA":[3820,4770,4770,6060],"CHICAGO, IL":[3640,4550,4550,5780],"MEMPHIS, TN":[3180,3970,3970,5040],"HOUSTON, TX":[4330,5410,5410,6870],"DETROIT, MI":[3590,4490,4490,5700],"CINCINNATI, OH":[3740,4680,4680,5940],"KANSAS CITY, KS":[3230,4040,4040,5130],"NEW YORK, NY":[3460,4330,4330,5500],"LA/LB, CA PORTS":[5040,6300,6300,8000],"DALLAS UPRR":[3570,4460,4460,5660],"COLUMBUS, OH":[4260,5320,5320,6760],"LOUISVILLE, KY":[3670,4590,4590,5830],"OMAHA, NE / COUNCIL BLUFFS, IA":[5410,6770,6770,8600],"SAVANNAH, GA":[3070,3840,3840,4880],"CHARLOTTE, NC":[3980,4980,4980,6320],"DALLAS BNSF":[3080,3850,3850,4890],"ST.LOUIS, MO":[3810,4760,4760,6050],"NASHVILLE, TN":[4850,6060,6060,7700],"NEW ORLEANS, LA":[3300,4130,4130,5250],"WILMINGTON, NC":[3350,4190,4190,5320],"NORFOLK, VA":[3140,3930,3930,4990],"BALTIMORE, MD":[5290,6610,6610,8390],"OAKLAND, CA":[4720,5900,5900,7490],"CHARLESTON, SC":[4140,5180,5180,6580],"BOSTON, MA":[3160,3950,3950,5020],"SALT LAKE CITY, UT":[3690,4610,4610,5850],"CLEVELAND, OH":[4230,5290,5290,6720],"MOBILE, AL":[3800,4750,4750,6030],"GREER, SC":[3330,4170,4170,5300],"JACKSONVILLE, FL":[5300,6630,6630,8420],"MINNEAPOLIS, MN / ST. PAUL, MN":[3450,4310,4310,5470],"TAMPA, FL":[3430,4290,4290,5450],"MIAMI, FL":[4740,5930,5930,7530],"PORTLAND OR":[4100,5120,5120,6500],"PORT EVERGLADES, FL":[4560,5700,5700,7240],"SEATTLE WA":[3410,4270,4270,5420],"TACOMA WA":[3880,4850,4850,6160],"PITTSBURGH, PA":[4980,6230,6230,7910],"DENVER":[3890,4860,4860,6170],"INDIANAPOLIS, IN":[4750,5940,5940,7540],"BUFFALO, NY":[3980,4980,4980,6320],"PHILADELPHIA, PA":[4430,5540,5540,7040],"WORCESTER, MA":[3810,4760,4760,6050],"EL PASO/SANTA TERESA, NM":[4110,5140,5140,6530]},"QINGDAO":{"ATLANTA, GA":[3270,4090,4090,5190],"CHICAGO, IL":[3220,4020,4020,5110],"MEMPHIS, TN":[3070,3840,3840,4880],"HOUSTON, TX":[3220,4020,4020,5110],"DETROIT, MI":[5380,6720,6720,8530],"CINCINNATI, OH":[4900,6130,6130,7780],"KANSAS CITY, KS":[4120,5150,5150,6540],"NEW YORK, NY":[4520,5650,5650,7180],"LA/LB, CA PORTS":[3610,4510,4510,5730],"DALLAS UPRR":[3180,3980,3980,5050],"COLUMBUS, OH":[3430,4290,4290,5450],"LOUISVILLE, KY":[4130,5160,5160,6550],"OMAHA, NE / COUNCIL BLUFFS, IA":[4150,5190,5190,6590],"SAVANNAH, GA":[4640,5800,5800,7370],"CHARLOTTE, NC":[3060,3830,3830,4870],"DALLAS BNSF":[3860,4830,4830,6130],"ST.LOUIS, MO":[3390,4240,4240,5380],"NASHVILLE, TN":[4310,5390,5390,6850],"NEW ORLEANS, LA":[3810,4760,4760,6050],"WILMINGTON, NC":[4490,5610,5610,7120],"NORFOLK, VA":[3630,4540,4540,5770],"BALTIMORE, MD":[5110,6390,6390,8120],"OAKLAND, CA":[3400,4250,4250,5400],"CHARLESTON, SC":[4960,6200,6200,7870],"BOSTON, MA":[3140,3930,3930,4990],"SALT LAKE CITY, UT":[4630,5790,5790,7350],"CLEVELAND, OH":[4450,5560,5560,7060],"MOBILE, AL":[4950,6190,6190,7860],"GREER, SC":[3550,4430,4430,5630],"JACKSONVILLE, FL":[3150,3940,3940,5010],"MINNEAPOLIS, MN / ST. PAUL, MN":[5390,6740,6740,8560],"TAMPA, FL":[4020,5020,5020,6380],"MIAMI, FL":[4450,5560,5560,7060],"PORTLAND OR":[4660,5830,5830,7400],"PORT EVERGLADES, FL":[5360,6700,6700,8510],"SEATTLE WA":[4270,5340,5340,6780],"TACOMA WA":[4740,5930,5930,7530],"PITTSBURGH, PA":[3110,3890,3890,4940],"DENVER":[5100,6370,6370,8090],"INDIANAPOLIS, IN":[4060,5070,5070,6440],"BUFFALO, NY":[3850,4810,4810,6110],"PHILADELPHIA, PA":[3720,4650,4650,5910],"WORCESTER, MA":[4940,6170,6170,7840],"EL PASO/SANTA TERESA, NM":[3530,4410,4410,5600]},"KAOHSIUNG":{"ATLANTA, GA":[5380,6730,6730,8550],"CHICAGO, IL":[3680,4600,4600,5840],"MEMPHIS, TN":[3530,4420,4420,5610],"HOUSTON, TX":[4050,5060,5060,6430],"DETROIT, MI":[3690,4610,4610,5850],"CINCINNATI, OH":[4280,5350,5350,6790],"KANSAS CITY, KS":[3750,4690,4690,5960],"NEW YORK, NY":[3640,4550,4550,5780],"LA/LB, CA PORTS":[3230,4040,4040,5130],"DALLAS UPRR":[3350,4190,4190,5320],"COLUMBUS, OH":[3170,3960,3960,5030],"LOUISVILLE, KY":[4110,5140,5140,6530],"OMAHA, NE / COUNCIL BLUFFS, IA":[4820,6030,6030,7660],"SAVANNAH, GA":[4940,6170,6170,7840],"CHARLOTTE, NC":[3480,4350,4350,5520],"DALLAS BNSF":[3760,4700,4700,5970],"ST.LOUIS, MO":[5270,6590,6590,8370],"NASHVILLE, TN":[3370,4210,4210,5350],"NEW ORLEANS, LA":[4740,5920,5920,7520],"WILMINGTON, NC":[4030,5040,5040,6400],"NORFOLK, VA":[3570,4460,4460,5660],"BALTIMORE, MD":[3920,4900,4900,6220],"OAKLAND, CA":[3090,3860,3860,4900],"CHARLESTON, SC":[4520,5650,5650,7180],"BOSTON, MA":[4660,5830,5830,7400],"SALT LAKE CITY, UT":[3800,4750,4750,6030],"CLEVELAND, OH":[4860,6080,6080,7720],"MOBILE, AL":[3730,4660,4660,5920],"GREER, SC":[3880,4850,4850,6160],"JACKSONVILLE, FL":[3900,4880,4880,6200],"MINNEAPOLIS, MN / ST. PAUL, MN":[3860,4830,4830,6130],"TAMPA, FL":[5070,6340,6340,8050],"MIAMI, FL":[3400,4250,4250,5400],"PORTLAND OR":[3390,4240,4240,5380],"PORT EVERGLADES, FL":[3790,4740,4740,6020],"SEATTLE WA":[3760,4700,4700,5970],"TACOMA WA":[4620,5770,5770,7330],"PITTSBURGH, PA":[3220,4020,4020,5110],"DENVER":[5030,6290,6290,7980],"INDIANAPOLIS, IN":[3750,4690,4690,5960],"BUFFALO, NY":[3950,4940,4940,6270],"PHILADELPHIA, PA":[3500,4370,4370,5550],"WORCESTER, MA":[3490,4360,4360,5540],"EL PASO/SANTA TERESA, NM":[4190,5240,5240,6650]},"HONG KONG":{"ATLANTA, GA":[4180,5220,5220,6630],"CHICAGO, IL":[4460,5580,5580,7090],"MEMPHIS, TN":[4850,6060,6060,7700],"HOUSTON, TX":[3490,4360,4360,5540],"DETROIT, MI":[4200,5250,5250,6670],"CINCINNATI, OH":[3790,4740,4740,6020],"KANSAS CITY, KS":[3950,4940,4940,6270],"NEW YORK, NY":[4590,5740,5740,7290],"LA/LB, CA PORTS":[3090,3860,3860,4900],"DALLAS UPRR":[4990,6240,6240,7920],"COLUMBUS, OH":[3820,4780,4780,6070],"LOUISVILLE, KY":[4370,5460,5460,6930],"OMAHA, NE / COUNCIL BLUFFS, IA":[3710,4640,4640,5890],"SAVANNAH, GA":[3880,4850,4850,6160],"CHARLOTTE, NC":[4720,5900,5900,7490],"DALLAS BNSF":[4690,5870,5870,7450],"ST.LOUIS, MO":[3400,4250,4250,5400],"NASHVILLE, TN":[3600,4500,4500,5720],"NEW ORLEANS, LA":[4970,6210,6210,7890],"WILMINGTON, NC":[4740,5920,5920,7520],"NORFOLK, VA":[3880,4850,4850,6160],"BALTIMORE, MD":[3170,3960,3960,5030],"OAKLAND, CA":[5430,6790,6790,8620],"CHARLESTON, SC":[4980,6230,6230,7910],"BOSTON, MA":[3160,3950,3950,5020],"SALT LAKE CITY, UT":[5040,6300,6300,8000],"CLEVELAND, OH":[3260,4070,4070,5170],"MOBILE, AL":[5120,6410,6410,8140],"GREER, SC":[4130,5160,5160,6550],"JACKSONVILLE, FL":[3810,4760,4760,6050],"MINNEAPOLIS, MN / ST. PAUL, MN":[5350,6690,6690,8500],"TAMPA, FL":[4370,5460,5460,6930],"MIAMI, FL":[3780,4730,4730,6010],"PORTLAND OR":[4000,5000,5000,6350],"PORT EVERGLADES, FL":[3140,3930,3930,4990],"SEATTLE WA":[3570,4460,4460,5660],"TACOMA WA":[3080,3850,3850,4890],"PITTSBURGH, PA":[4000,5000,5000,6350],"DENVER":[3530,4410,4410,5600],"INDIANAPOLIS, IN":[3050,3810,3810,4840],"BUFFALO, NY":[3180,3980,3980,5050],"PHILADELPHIA, PA":[3360,4200,4200,5330],"WORCESTER, MA":[3400,4250,4250,5400],"EL PASO/SANTA TERESA, NM":[3320,4150,4150,5270]},"PUSAN":{"ATLANTA, GA":[3810,4760,4760,6050],"CHICAGO, IL":[4630,5790,5790,7350],"MEMPHIS, TN":[3370,4210,4210,5350],"HOUSTON, TX":[5410,6760,6760,8590],"DETROIT, MI":[5400,6750,6750,8570],"CINCINNATI, OH":[5070,6340,6340,8050],"KANSAS CITY, KS":[5320,6650,6650,8450],"NEW YORK, NY":[4960,6200,6200,7870],"LA/LB, CA PORTS":[3220,4020,4020,5110],"DALLAS UPRR":[5340,6680,6680,8480],"COLUMBUS, OH":[5280,6600,6600,8380],"LOUISVILLE, KY":[5260,6570,6570,8340],"OMAHA, NE / COUNCIL BLUFFS, IA":[3710,4640,4640,5890],"SAVANNAH, GA":[4240,5300,5300,6730],"CHARLOTTE, NC":[3600,4500,4500,5720],"DALLAS BNSF":[4690,5860,5860,7440],"ST.LOUIS, MO":[4070,5090,5090,6460],"NASHVILLE, TN":[4920,6150,6150,7810],"NEW ORLEANS, LA":[3460,4330,4330,5500],"WILMINGTON, NC":[3820,4770,4770,6060],"NORFOLK, VA":[3140,3930,3930,4990],"BALTIMORE, MD":[3840,4800,4800,6100],"OAKLAND, CA":[5330,6660,6660,8460],"CHARLESTON, SC":[3860,4830,4830,6130],"BOSTON, MA":[4570,5710,5710,7250],"SALT LAKE CITY, UT":[3050,3810,3810,4840],"CLEVELAND, OH":[3850,4810,4810,6110],"MOBILE, AL":[4090,5110,5110,6490],"GREER, SC":[3110,3890,3890,4940],"JACKSONVILLE, FL":[4000,5000,5000,6350],"MINNEAPOLIS, MN / ST. PAUL, MN":[3090,3860,3860,4900],"TAMPA, FL":[4180,5220,5220,6630],"MIAMI, FL":[5000,6250,6250,7940],"PORTLAND OR":[3090,3860,3860,4900],"PORT EVERGLADES, FL":[5000,6250,6250,7940],"SEATTLE WA":[3900,4870,4870,6180],"TACOMA WA":[3070,3840,3840,4880],"PITTSBURGH, PA":[4340,5420,5420,6880],"DENVER":[4740,5930,5930,7530],"INDIANAPOLIS, IN":[5170,6460,6460,8200],"BUFFALO, NY":[5390,6740,6740,8560],"PHILADELPHIA, PA":[3850,4810,4810,6110],"WORCESTER, MA":[5070,6340,6340,8050],"EL PASO/SANTA TERESA, NM":[4610,5760,5760,7320]},"PORT KLANG":{"ATLANTA, GA":[3160,3950,3950,5020],"CHICAGO, IL":[3120,3900,3900,4950],"MEMPHIS, TN":[4740,5930,5930,7530],"HOUSTON, TX":[4870,6090,6090,7730],"DETROIT, MI":[4170,5210,5210,6620],"CINCINNATI, OH":[3600,4500,4500,5720],"KANSAS CITY, KS":[3300,4130,4130,5250],"NEW YORK, NY":[4010,5010,5010,6360],"LA/LB, CA PORTS":[4650,5810,5810,7380],"DALLAS UPRR":[4640,5800,5800,7370],"COLUMBUS, OH":[4740,5920,5920,7520],"LOUISVILLE, KY":[5160,6450,6450,8190],"OMAHA, NE / COUNCIL BLUFFS, IA":[3180,3970,3970,5040],"SAVANNAH, GA":[3200,4000,4000,5080],"CHARLOTTE, NC":[5100,6380,6380,8100],"DALLAS BNSF":[4100,5130,5130,6520],"ST.LOUIS, MO":[4880,6100,6100,7750],"NASHVILLE, TN":[3550,4440,4440,5640],"NEW ORLEANS, LA":[5140,6430,6430,8170],"WILMINGTON, NC":[3270,4090,4090,5190],"NORFOLK, VA":[4320,5400,5400,6860],"BALTIMORE, MD":[4180,5220,5220,6630],"OAKLAND, CA":[3260,4080,4080,5180],"CHARLESTON, SC":[4780,5980,5980,7590],"BOSTON, MA":[3500,4370,4370,5550],"SALT LAKE CITY, UT":[4620,5780,5780,7340],"CLEVELAND, OH":[3360,4200,4200,5330],"MOBILE, AL":[4060,5070,5070,6440],"GREER, SC":[4690,5860,5860,7440],"JACKSONVILLE, FL":[4890,6110,6110,7760],"MINNEAPOLIS, MN / ST. PAUL, MN":[3090,3860,3860,4900],"TAMPA, FL":[5410,6760,6760,8590],"MIAMI, FL":[4010,5010,5010,6360],"PORTLAND OR":[4810,6010,6010,7630],"PORT EVERGLADES, FL":[4870,6090,6090,7730],"SEATTLE WA":[4110,5140,5140,6530],"TACOMA WA":[3180,3980,3980,5050],"PITTSBURGH, PA":[3800,4750,4750,6030],"DENVER":[3420,4270,4270,5420],"INDIANAPOLIS, IN":[3590,4490,4490,5700],"BUFFALO, NY":[3820,4780,4780,6070],"PHILADELPHIA, PA":[3790,4740,4740,6020],"WORCESTER, MA":[4860,6080,6080,7720],"EL PASO/SANTA TERESA, NM":[4490,5610,5610,7120]},"SINGAPORE":{"ATLANTA, GA":[3860,4820,4820,6120],"CHICAGO, IL":[3470,4340,4340,5510],"MEMPHIS, TN":[4620,5770,5770,7330],"HOUSTON, TX":[4110,5140,5140,6530],"DETROIT, MI":[3210,4010,4010,5090],"CINCINNATI, OH":[3180,3980,3980,5050],"KANSAS CITY, KS":[4930,6160,6160,7820],"NEW YORK, NY":[3230,4040,4040,5130],"LA/LB, CA PORTS":[4040,5050,5050,6410],"DALLAS UPRR":[4100,5120,5120,6500],"COLUMBUS, OH":[4260,5330,5330,6770],"LOUISVILLE, KY":[3420,4280,4280,5440],"OMAHA, NE / COUNCIL BLUFFS, IA":[4880,6100,6100,7750],"SAVANNAH, GA":[3040,3800,3800,4830],"CHARLOTTE, NC":[3910,4890,4890,6210],"DALLAS BNSF":[3960,4950,4950,6290],"ST.LOUIS, MO":[4740,5930,5930,7530],"NASHVILLE, TN":[3580,4480,4480,5690],"NEW ORLEANS, LA":[3440,4300,4300,5460],"WILMINGTON, NC":[5000,6250,6250,7940],"NORFOLK, VA":[3420,4280,4280,5440],"BALTIMORE, MD":[5420,6770,6770,8600],"OAKLAND, CA":[3380,4230,4230,5370],"CHARLESTON, SC":[4140,5180,5180,6580],"BOSTON, MA":[5160,6450,6450,8190],"SALT LAKE CITY, UT":[5240,6550,6550,8320],"CLEVELAND, OH":[3330,4160,4160,5280],"MOBILE, AL":[4950,6190,6190,7860],"GREER, SC":[4010,5010,5010,6360],"JACKSONVILLE, FL":[3510,4390,4390,5580],"MINNEAPOLIS, MN / ST. PAUL, MN":[5270,6590,6590,8370],"TAMPA, FL":[4090,5110,5110,6490],"MIAMI, FL":[3690,4610,4610,5850],"PORTLAND OR":[3980,4970,4970,6310],"PORT EVERGLADES, FL":[4160,5200,5200,6600],"SEATTLE WA":[4000,5000,5000,6350],"TACOMA WA":[4740,5920,5920,7520],"PITTSBURGH, PA":[3930,4910,4910,6240],"DENVER":[4280,5350,5350,6790],"INDIANAPOLIS, IN":[4740,5920,5920,7520],"BUFFALO, NY":[5150,6440,6440,8180],"PHILADELPHIA, PA":[3940,4920,4920,6250],"WORCESTER, MA":[3970,4960,4960,6300],"EL PASO/SANTA TERESA, NM":[3740,4670,4670,5930]},"LAEM CHABANG":{"ATLANTA, GA":[3580,4480,4480,5690],"CHICAGO, IL":[3480,4350,4350,5520],"MEMPHIS, TN":[4940,6170,6170,7840],"HOUSTON, TX":[4500,5630,5630,7150],"DETROIT, MI":[4480,5600,5600,7110],"CINCINNATI, OH":[3600,4500,4500,5720],"KANSAS CITY, KS":[3480,4350,4350,5520],"NEW YORK, NY":[3260,4070,4070,5170],"LA/LB, CA PORTS":[4700,5870,5870,7450],"DALLAS UPRR":[3210,4010,4010,5090],"COLUMBUS, OH":[4740,5930,5930,7530],"LOUISVILLE, KY":[3930,4910,4910,6240],"OMAHA, NE / COUNCIL BLUFFS, IA":[4060,5080,5080,6450],"SAVANNAH, GA":[4580,5730,5730,7280],"CHARLOTTE, NC":[3570,4460,4460,5660],"DALLAS BNSF":[3570,4460,4460,5660],"ST.LOUIS, MO":[3510,4390,4390,5580],"NASHVILLE, TN":[4190,5240,5240,6650],"NEW ORLEANS, LA":[4060,5070,5070,6440],"WILMINGTON, NC":[3100,3880,3880,4930],"NORFOLK, VA":[5060,6330,6330,8040],"BALTIMORE, MD":[4210,5260,5260,6680],"OAKLAND, CA":[5380,6730,6730,8550],"CHARLESTON, SC":[3940,4920,4920,6250],"BOSTON, MA":[3590,4490,4490,5700],"SALT LAKE CITY, UT":[4540,5680,5680,7210],"CLEVELAND, OH":[4090,5110,5110,6490],"MOBILE, AL":[5400,6750,6750,8570],"GREER, SC":[4220,5270,5270,6690],"JACKSONVILLE, FL":[5290,6610,6610,8390],"MINNEAPOLIS, MN / ST. PAUL, MN":[3200,4000,4000,5080],"TAMPA, FL":[4210,5260,5260,6680],"MIAMI, FL":[4970,6210,6210,7890],"PORTLAND OR":[3500,4370,4370,5550],"PORT EVERGLADES, FL":[3900,4870,4870,6180],"SEATTLE WA":[4560,5700,5700,7240],"TACOMA WA":[3540,4430,4430,5630],"PITTSBURGH, PA":[4380,5480,5480,6960],"DENVER":[4800,6000,6000,7620],"INDIANAPOLIS, IN":[4850,6060,6060,7700],"BUFFALO, NY":[4450,5560,5560,7060],"PHILADELPHIA, PA":[5400,6750,6750,8570],"WORCESTER, MA":[3660,4580,4580,5820],"EL PASO/SANTA TERESA, NM":[5350,6690,6690,8500]},"TAIPEI":{"ATLANTA, GA":[5330,6660,6660,8460],"CHICAGO, IL":[4840,6050,6050,7680],"MEMPHIS, TN":[4650,5810,5810,7380],"HOUSTON, TX":[3470,4340,4340,5510],"DETROIT, MI":[3840,4800,4800,6100],"CINCINNATI, OH":[4620,5780,5780,7340],"KANSAS CITY, KS":[3540,4430,4430,5630],"NEW YORK, NY":[4490,5610,5610,7120],"LA/LB, CA PORTS":[3530,4410,4410,5600],"DALLAS UPRR":[3640,4550,4550,5780],"COLUMBUS, OH":[3280,4100,4100,5210],"LOUISVILLE, KY":[4240,5300,5300,6730],"OMAHA, NE / COUNCIL BLUFFS, IA":[5250,6560,6560,8330],"SAVANNAH, GA":[4260,5320,5320,6760],"CHARLOTTE, NC":[4790,5990,5990,7610],"DALLAS BNSF":[3980,4980,4980,6320],"ST.LOUIS, MO":[4000,5000,5000,6350],"NASHVILLE, TN":[3590,4490,4490,5700],"NEW ORLEANS, LA":[4410,5510,5510,7000],"WILMINGTON, NC":[3500,4370,4370,5550],"NORFOLK, VA":[5070,6340,6340,8050],"BALTIMORE, MD":[4330,5410,5410,6870],"OAKLAND, CA":[3550,4430,4430,5630],"CHARLESTON, SC":[4220,5280,5280,6710],"BOSTON, MA":[5090,6360,6360,8080],"SALT LAKE CITY, UT":[4730,5910,5910,7510],"CLEVELAND, OH":[4450,5560,5560,7060],"MOBILE, AL":[4510,5640,5640,7160],"GREER, SC":[4710,5890,5890,7480],"JACKSONVILLE, FL":[4370,5460,5460,6930],"MINNEAPOLIS, MN / ST. PAUL, MN":[4830,6040,6040,7670],"TAMPA, FL":[3110,3890,3890,4940],"MIAMI, FL":[3100,3880,3880,4930],"PORTLAND OR":[3800,4750,4750,6030],"PORT EVERGLADES, FL":[5080,6350,6350,8070],"SEATTLE WA":[3320,4150,4150,5270],"TACOMA WA":[4360,5450,5450,6920],"PITTSBURGH, PA":[5100,6370,6370,8090],"DENVER":[4130,5160,5160,6550],"INDIANAPOLIS, IN":[3380,4230,4230,5370],"BUFFALO, NY":[4920,6150,6150,7810],"PHILADELPHIA, PA":[3290,4110,4110,5220],"WORCESTER, MA":[3920,4900,4900,6220],"EL PASO/SANTA TERESA, NM":[5230,6540,6540,8300]},"TIANJINXINGANG":{"ATLANTA, GA":[4060,5080,5080,6450],"CHICAGO, IL":[4390,5490,5490,6970],"MEMPHIS, TN":[3870,4840,4840,6150],"HOUSTON, TX":[5110,6390,6390,8120],"DETROIT, MI":[4830,6040,6040,7670],"CINCINNATI, OH":[4160,5200,5200,6600],"KANSAS CITY, KS":[3190,3990,3990,5070],"NEW YORK, NY":[3190,3990,3990,5070],"LA/LB, CA PORTS":[3650,4560,4560,5790],"DALLAS UPRR":[4840,6050,6050,7680],"COLUMBUS, OH":[3300,4120,4120,5230],"LOUISVILLE, KY":[4870,6090,6090,7730],"OMAHA, NE / COUNCIL BLUFFS, IA":[4110,5140,5140,6530],"SAVANNAH, GA":[3960,4950,4950,6290],"CHARLOTTE, NC":[4570,5710,5710,7250],"DALLAS BNSF":[4630,5790,5790,7350],"ST.LOUIS, MO":[3350,4190,4190,5320],"NASHVILLE, TN":[3630,4540,4540,5770],"NEW ORLEANS, LA":[3980,4980,4980,6320],"WILMINGTON, NC":[4450,5560,5560,7060],"NORFOLK, VA":[3170,3960,3960,5030],"BALTIMORE, MD":[4270,5340,5340,6780],"OAKLAND, CA":[3940,4920,4920,6250],"CHARLESTON, SC":[3410,4260,4260,5410],"BOSTON, MA":[3620,4530,4530,5750],"SALT LAKE CITY, UT":[4870,6090,6090,7730],"CLEVELAND, OH":[4960,6200,6200,7870],"MOBILE, AL":[3070,3840,3840,4880],"GREER, SC":[3640,4550,4550,5780],"JACKSONVILLE, FL":[5000,6250,6250,7940],"MINNEAPOLIS, MN / ST. PAUL, MN":[3810,4760,4760,6050],"TAMPA, FL":[4590,5740,5740,7290],"MIAMI, FL":[3300,4130,4130,5250],"PORTLAND OR":[4780,5980,5980,7590],"PORT EVERGLADES, FL":[5260,6570,6570,8340],"SEATTLE WA":[5140,6430,6430,8170],"TACOMA WA":[4880,6100,6100,7750],"PITTSBURGH, PA":[4230,5290,5290,6720],"DENVER":[4320,5400,5400,6860],"INDIANAPOLIS, IN":[3350,4190,4190,5320],"BUFFALO, NY":[3850,4810,4810,6110],"PHILADELPHIA, PA":[3640,4550,4550,5780],"WORCESTER, MA":[5290,6610,6610,8390],"EL PASO/SANTA TERESA, NM":[4920,6150,6150,7810]},"VUNG TAU":{"ATLANTA, GA":[5250,6560,6560,8330],"CHICAGO, IL":[5210,6510,6510,8270],"MEMPHIS, TN":[4960,6200,6200,7870],"HOUSTON, TX":[5170,6460,6460,8200],"DETROIT, MI":[3600,4500,4500,5720],"CINCINNATI, OH":[3260,4070,4070,5170],"KANSAS CITY, KS":[4220,5280,5280,6710],"NEW YORK, NY":[3210,4010,4010,5090],"LA/LB, CA PORTS":[4070,5090,5090,6460],"DALLAS UPRR":[4140,5180,5180,6580],"COLUMBUS, OH":[3980,4970,4970,6310],"LOUISVILLE, KY":[3970,4960,4960,6300],"OMAHA, NE / COUNCIL BLUFFS, IA":[3330,4160,4160,5280],"SAVANNAH, GA":[4830,6040,6040,7670],"CHARLOTTE, NC":[5350,6690,6690,8500],"DALLAS BNSF":[4940,6170,6170,7840],"ST.LOUIS, MO":[3300,4120,4120,5230],"NASHVILLE, TN":[3750,4690,4690,5960],"NEW ORLEANS, LA":[4860,6080,6080,7720],"WILMINGTON, NC":[3230,4040,4040,5130],"NORFOLK, VA":[5380,6720,6720,8530],"BALTIMORE, MD":[4410,5510,5510,7000],"OAKLAND, CA":[3180,3980,3980,5050],"CHARLESTON, SC":[5380,6730,6730,8550],"BOSTON, MA":[3400,4250,4250,5400],"SALT LAKE CITY, UT":[4170,5210,5210,6620],"CLEVELAND, OH":[4160,5200,5200,6600],"MOBILE, AL":[4030,5040,5040,6400],"GREER, SC":[3820,4770,4770,6060],"JACKSONVILLE, FL":[3180,3980,3980,5050],"MINNEAPOLIS, MN / ST. PAUL, MN":[3700,4630,4630,5880],"TAMPA, FL":[3400,4250,4250,5400],"MIAMI, FL":[5420,6770,6770,8600],"PORTLAND OR":[3740,4680,4680,5940],"PORT EVERGLADES, FL":[4580,5720,5720,7260],"SEATTLE WA":[5070,6340,6340,8050],"TACOMA WA":[5430,6790,6790,8620],"PITTSBURGH, PA":[4450,5560,5560,7060],"DENVER":[3940,4930,4930,6260],"INDIANAPOLIS, IN":[4890,6110,6110,7760],"BUFFALO, NY":[4260,5320,5320,6760],"PHILADELPHIA, PA":[4060,5080,5080,6450],"WORCESTER, MA":[4990,6240,6240,7920],"EL PASO/SANTA TERESA, NM":[4120,5150,5150,6540]}};

const EQUIPMENT_TYPES = ["20'", "40'GP", "40'HQ", "45'HQ"];

// Trucking facility database
const DESTINATIONS = [
  {name:"ATLANTA, GA - CSX & BNSF", type:"IPI", lat:33.545109, lon:-84.609939},
  {name:"CHICAGO, IL - CN RAIL - CHICAGO - HARVEY (I092)", type:"IPI", lat:41.582582, lon:-87.646201},
  {name:"MEMPHIS, TN - CN - INTERMODAL GATEWAY MEMPHIS", type:"IPI", lat:35.031884, lon:-90.151894},
  {name:"MEMPHIS, TN - CSX - MEMPHIS", type:"IPI", lat:35.031884, lon:-90.151894},
  {name:"CHICAGO, IL - CP RAIL - CHICAGO, BENSENVILLE (J830)", type:"IPI", lat:41.941386, lon:-87.894674},
  {name:"CHICAGO, IL - BNSF - CHICAGO - LPC (H572)", type:"IPI", lat:41.393772, lon:-88.152065},
  {name:"CHICAGO, IL  - UP JOLIET INTERMODAL TERMINAL GLOBAL 4 (I206)", type:"IPI", lat:41.458470, lon:-88.118630},
  {name:"ATLANTA, GA - NS AUSTELL", type:"IPI", lat:33.822647, lon:-84.651274},
  {name:"CHICAGO, IL -  NORFOLK SOUTHERN - LANDERS (I104)", type:"IPI", lat:41.756107, lon:-87.683117},
  {name:"CHICAGO, IL - CSX (J470)", type:"IPI", lat:41.762825, lon:-87.799362},
  {name:"MEMPHIS, TN - UP - MARION, AR", type:"IPI", lat:35.191874, lon:-90.257432},
  {name:"HOUSTON, TX - HOUSTON PORT", type:"PORT", lat:29.673630, lon:-95.006670},
  {name:"DETROIT, MI", type:"IPI", lat:42.316722, lon:-83.133398},
  {name:"CINCINNATI, OH", type:"IPI", lat:39.121175, lon:-84.537791},
  {name:"KANSAS CITY, KS - CPKC - KANSAS CITY / CSX KANSAS CITY", type:"IPI", lat:38.859078, lon:-94.559678},
  {name:"MEMPHIS, TN - BNSF - MEMPHIS (SHELBY)", type:"IPI", lat:35.023622, lon:-89.900600},
  {name:"NEW YORK, NY", type:"PORT", lat:40.668837, lon:-74.156747},
  {name:"LA/LB, CA PORTS", type:"PORT", lat:33.782664, lon:-118.217784},
  {name:"KANSAS CITY, KS - NS VOLTZ / UP NEFF", type:"IPI", lat:39.181953, lon:-94.427906},
  {name:"MEMPHIS, TN - NS - ROSSVILLE,TN", type:"IPI", lat:35.005260, lon:-89.578705},
  {name:"KANSAS CITY, KS - BNSF LOGISTICS PARK", type:"IPI", lat:38.767739, lon:-94.984948},
  {name:"DALLAS UPRR", type:"IPI", lat:32.628501, lon:-96.680962},
  {name:"COLUMBUS, OH", type:"IPI", lat:39.995573, lon:-82.828357},
  {name:"LOUISVILLE, KY", type:"IPI", lat:38.114500, lon:-85.759700},
  {name:"OMAHA, NE / COUNCIL BLUFFS, IA", type:"IPI", lat:41.216343, lon:-95.929840},
  {name:"SAVANNAH, GA", type:"PORT", lat:32.127400, lon:-81.163200},
  {name:"CHARLOTTE, NC", type:"IPI", lat:35.272334, lon:-80.908698},
  {name:"DALLAS BNSF", type:"IPI", lat:32.964963, lon:-97.327672},
  {name:"ST.LOUIS, MO", type:"IPI", lat:38.601750, lon:-90.315587},
  {name:"NASHVILLE, TN", type:"IPI", lat:36.101542, lon:-86.756239},
  {name:"NEW ORLEANS, LA", type:"IPI", lat:29.915698, lon:-90.101184},
  {name:"WILMINGTON, NC", type:"PORT", lat:34.192767, lon:-77.945727},
  {name:"NORFOLK, VA", type:"PORT", lat:36.872573, lon:-76.358894},
  {name:"BALTIMORE, MD", type:"PORT", lat:39.258370, lon:-76.537550},
  {name:"OAKLAND, CA", type:"PORT", lat:37.796856, lon:-122.304260},
  {name:"CHARLESTON, SC", type:"PORT", lat:32.840553, lon:-79.953115},
  {name:"BOSTON, MA", type:"PORT", lat:42.339765, lon:-71.035435},
  {name:"SALT LAKE CITY, UT", type:"IPI", lat:40.771550, lon:-111.907986},
  {name:"CLEVELAND, OH", type:"IPI", lat:41.563840, lon:-81.575457},
  {name:"MOBILE, AL", type:"PORT", lat:30.666587, lon:-88.041873},
  {name:"GREER, SC", type:"IPI", lat:34.930864, lon:-82.192319},
  {name:"JACKSONVILLE, FL", type:"PORT", lat:30.394677, lon:-81.540770},
  {name:"MINNEAPOLIS, MN / ST. PAUL, MN", type:"IPI", lat:44.968859, lon:-93.172196},
  {name:"TAMPA, FL", type:"PORT", lat:27.919242, lon:-82.431773},
  {name:"MIAMI, FL", type:"PORT", lat:25.771817, lon:-80.165674},
  {name:"PORTLAND OR", type:"PORT", lat:45.638177, lon:-122.750626},
  {name:"PORT EVERGLADES, FL", type:"PORT", lat:26.081660, lon:-80.120584},
  {name:"SEATTLE WA", type:"PORT", lat:47.573856, lon:-122.348359},
  {name:"TACOMA WA", type:"PORT", lat:47.266552, lon:-122.410226},
  {name:"PITTSBURGH, PA", type:"IPI", lat:40.312725, lon:-79.900495},
  {name:"DENVER - BNSF DENVER / UP DENVER", type:"IPI", lat:39.790500, lon:-104.994500},
  {name:"DENVER - BNSF HUDSON", type:"IPI", lat:40.067600, lon:-104.628800},
  {name:"INDIANAPOLIS, IN", type:"IPI", lat:39.746623, lon:-86.164181},
  {name:"BUFFALO, NY", type:"IPI", lat:42.797787, lon:-78.834263},
  {name:"PHILADELPHIA, PA", type:"PORT", lat:39.900862, lon:-75.116517},
  {name:"WORCESTER, MA", type:"IPI", lat:42.224400, lon:-71.790708},
  {name:"EL PASO/SANTA TERESA, NM", type:"IPI", lat:31.752711, lon:-106.493000}
];

const RPM_BY_LOCATION = {
  "ATLANTA, GA - CSX & BNSF": 3.0, "ATLANTA, GA - NS AUSTELL": 3.0,
  "BALTIMORE, MD": 3.5, "BOSTON, MA": 3.5, "BUFFALO, NY": 5.0,
  "CHARLESTON, SC": 3.0, "CHARLOTTE, NC": 3.0,
  "CHICAGO, IL  - UP JOLIET INTERMODAL TERMINAL GLOBAL 4 (I206)": 3.0,
  "CHICAGO, IL -  NORFOLK SOUTHERN - LANDERS (I104)": 3.0,
  "CHICAGO, IL - BNSF - CHICAGO - LPC (H572)": 3.0,
  "CHICAGO, IL - CN RAIL - CHICAGO - HARVEY (I092)": 3.0,
  "CHICAGO, IL - CP RAIL - CHICAGO, BENSENVILLE (J830)": 3.0,
  "CHICAGO, IL - CSX (J470)": 3.0,
  "CINCINNATI, OH": 3.0, "CLEVELAND, OH": 3.0, "COLUMBUS, OH": 3.0,
  "DALLAS BNSF": 3.0, "DALLAS UPRR": 3.0,
  "DENVER - BNSF DENVER / UP DENVER": 5.0, "DENVER - BNSF HUDSON": 5.0,
  "DETROIT, MI": 3.0, "EL PASO/SANTA TERESA, NM": 5.0, "GREER, SC": 3.0,
  "HOUSTON, TX - HOUSTON PORT": 3.0, "INDIANAPOLIS, IN": 5.0,
  "JACKSONVILLE, FL": 3.0, "KANSAS CITY, KS - BNSF LOGISTICS PARK": 3.0,
  "KANSAS CITY, KS - CPKC - KANSAS CITY / CSX KANSAS CITY": 3.0,
  "KANSAS CITY, KS - NS VOLTZ / UP NEFF": 3.0, "LA/LB, CA PORTS": 3.25,
  "LOUISVILLE, KY": 3.0, "MEMPHIS, TN - BNSF - MEMPHIS (SHELBY)": 3.0,
  "MEMPHIS, TN - CN - INTERMODAL GATEWAY MEMPHIS": 3.0,
  "MEMPHIS, TN - CSX - MEMPHIS": 3.0, "MEMPHIS, TN - NS - ROSSVILLE,TN": 3.0,
  "MEMPHIS, TN - UP - MARION, AR": 3.0, "MIAMI, FL": 4.0,
  "MINNEAPOLIS, MN / ST. PAUL, MN": 3.0, "MOBILE, AL": 3.0,
  "NASHVILLE, TN": 3.0, "NEW ORLEANS, LA": 3.25, "NEW YORK, NY": 4.0,
  "NORFOLK, VA": 3.0, "OAKLAND, CA": 3.5,
  "OMAHA, NE / COUNCIL BLUFFS, IA": 3.0, "PHILADELPHIA, PA": 5.0,
  "PITTSBURGH, PA": 5.0, "PORT EVERGLADES, FL": 5.0, "PORTLAND OR": 3.5,
  "SALT LAKE CITY, UT": 3.0, "SAVANNAH, GA": 3.0, "SEATTLE WA": 3.25,
  "ST.LOUIS, MO": 3.0, "TACOMA WA": 3.0, "TAMPA, FL": 3.0,
  "WILMINGTON, NC": 3.0, "WORCESTER, MA": 5.0
};

// Normalization functions
function normalizeString(str) {
  if (!str) return "";
  return str.toUpperCase()
    .trim()
    .replace(/\s+/g, " ")
    .replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g, "")
    .replace(/\s{2,}/g, " ");
}

function normalizeFacilityName(s) {
  if (!s) return "";
  let t = String(s).toUpperCase().trim();
  t = t.replace(/\s+/g, " ");
  t = t.replace(/[.]/g, " ");
  t = t.replace(/[^A-Z0-9,&\s\-]/g, "");
  t = t.replace(/\s{2,}/g, " ");
  t = t.replace(/\bPORT OF\s+/g, "");
  t = t.replace(/\bBNSF\b|\bUP\b|\bNS\b|\bCSX\b|\bCP\b|\bCN\b/g, "").replace(/\s{2,}/g," ").trim();
  const dash = t.indexOf(" - ");
  if (dash > -1) t = t.slice(0, dash).trim();
  t = t.replace(/,?\s+(TERMINAL|RAMP|RAIL|YARD|GATE|PORT|RDC)$/g, "").trim();
  return t;
}

function getRpmFor(name) {
  if (name && RPM_BY_LOCATION[name]) return RPM_BY_LOCATION[name];
  
  const norm = normalizeFacilityName(name);
  for (const key in RPM_BY_LOCATION) {
    if (normalizeFacilityName(key) === norm) return RPM_BY_LOCATION[key];
  }
  
  // Fallback
  return 3.5;
}

// Get all origins
const ORIGINS = Object.keys(OCEAN_RATES).sort();

// Get all destinations from ocean rates
let oceanDestinations = new Set();
for (const origin in OCEAN_RATES) {
  for (const dest in OCEAN_RATES[origin]) {
    oceanDestinations.add(dest);
  }
}
oceanDestinations = Array.from(oceanDestinations).sort();

// Autocomplete functionality
function setupAutocomplete(inputEl, items, autocompleteEl, onSelect) {
  let currentFocus = -1;
  
  inputEl.addEventListener("input", function() {
    const val = this.value;
    closeAllLists();
    if (!val) return;
    currentFocus = -1;
    
    const matches = items.filter(item => 
      normalizeString(item).includes(normalizeString(val))
    );
    
    if (matches.length === 0) {
      autocompleteEl.style.display = "none";
      return;
    }
    
    autocompleteEl.innerHTML = "";
    matches.slice(0, 10).forEach(item => {
      const div = document.createElement("div");
      div.textContent = item;
      div.addEventListener("click", function() {
        inputEl.value = item;
        closeAllLists();
        if (onSelect) onSelect(item);
      });
      autocompleteEl.appendChild(div);
    });
    autocompleteEl.style.display = "block";
  });
  
  inputEl.addEventListener("keydown", function(e) {
    let items = autocompleteEl.getElementsByTagName("div");
    if (e.keyCode === 40) { // DOWN
      currentFocus++;
      addActive(items);
    } else if (e.keyCode === 38) { // UP
      currentFocus--;
      addActive(items);
    } else if (e.keyCode === 13) { // ENTER
      e.preventDefault();
      if (currentFocus > -1 && items[currentFocus]) {
        items[currentFocus].click();
      }
    }
  });
  
  function addActive(items) {
    if (!items) return;
    removeActive(items);
    if (currentFocus >= items.length) currentFocus = 0;
    if (currentFocus < 0) currentFocus = items.length - 1;
    items[currentFocus].classList.add("autocomplete-active");
    items[currentFocus].style.background = "#f4f4f4";
  }
  
  function removeActive(items) {
    for (let i = 0; i < items.length; i++) {
      items[i].classList.remove("autocomplete-active");
      items[i].style.background = "";
    }
  }
  
  function closeAllLists() {
    autocompleteEl.style.display = "none";
  }
  
  document.addEventListener("click", function(e) {
    if (e.target !== inputEl) {
      closeAllLists();
    }
  });
}

// Setup autocompletes
setupAutocomplete($("origin"), ORIGINS, $("originAutocomplete"));

function updateDestinationAutocomplete() {
  const isDoorMove = $("doorMove").checked;
  if (isDoorMove) {
    $("destHint").textContent = "Enter any address for door delivery";
  } else {
    $("destHint").textContent = "Select port or IPI destination";
    setupAutocomplete($("destination"), oceanDestinations, $("destAutocomplete"));
  }
}

$("doorMove").addEventListener("change", updateDestinationAutocomplete);
updateDestinationAutocomplete();

// Geocoding function
async function geocode(address) {
  log(`Geocoding: ${address}`);
  const url = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}`;
  const resp = await fetch(url);
  const data = await resp.json();
  if (data.length === 0) throw new Error("Address not found");
  return { lat: parseFloat(data[0].lat), lon: parseFloat(data[0].lon) };
}

// Routing function
async function getRoute(from, to) {
  const url = `https://router.project-osrm.org/route/v1/driving/${from.lon},${from.lat};${to.lon},${to.lat}?overview=false`;
  const resp = await fetch(url);
  const data = await resp.json();
  if (data.code !== "Ok") throw new Error("Routing failed");
  return data.routes[0].distance * 0.000621371; // meters to miles
}

// Find nearest facility
async function findNearestFacility(userCoords) {
  log("Finding nearest facility by road distance...");
  
  // Pre-filter by air distance
  const withAirDist = DESTINATIONS.map(dest => ({
    ...dest,
    airDist: haversineMiles(userCoords, dest)
  })).sort((a, b) => a.airDist - b.airDist).slice(0, 12);
  
  log(`Pre-filtered to ${withAirDist.length} facilities by air distance`);
  
  // Get road distances
  const withRoadDist = [];
  for (const dest of withAirDist) {
    try {
      const roadMiles = await getRoute(userCoords, dest);
      withRoadDist.push({ ...dest, roadMiles });
      log(`${dest.name}: ${roadMiles.toFixed(1)} mi`);
    } catch (e) {
      log(`Failed to route to ${dest.name}: ${e.message}`);
    }
  }
  
  if (withRoadDist.length === 0) throw new Error("No routes found");
  
  withRoadDist.sort((a, b) => a.roadMiles - b.roadMiles);
  return withRoadDist[0];
}

// Calculate trucking cost
function calculateTruckingCost(facility, roundTripMiles) {
  const rpm = getRpmFor(facility.name);
  const cost = 250 + (rpm * roundTripMiles);
  return Math.max(cost, 350);
}

// Find ocean rates
function findOceanRates(origin, destination) {
  const normDest = normalizeString(destination);
  
  // Try exact match first
  if (OCEAN_RATES[origin] && OCEAN_RATES[origin][destination]) {
    return OCEAN_RATES[origin][destination];
  }
  
  // Try normalized match
  if (OCEAN_RATES[origin]) {
    for (const dest in OCEAN_RATES[origin]) {
      if (normalizeString(dest) === normDest) {
        return OCEAN_RATES[origin][dest];
      }
    }
    
    // Try facility name normalization
    const normFacDest = normalizeFacilityName(destination);
    for (const dest in OCEAN_RATES[origin]) {
      if (normalizeFacilityName(dest) === normFacDest) {
        return OCEAN_RATES[origin][dest];
      }
    }
  }
  
  return null;
}

// Main calculation
$("calcBtn").addEventListener("click", async function() {
  try {
    logEl.textContent = "";
    $("results").style.display = "none";
    setBadge("Processing...", "var(--orange)");
    
    const origin = $("origin").value.trim();
    const destination = $("destination").value.trim();
    const isDoorMove = $("doorMove").checked;
    
    if (!origin || !destination) {
      throw new Error("Please enter both origin and destination");
    }
    
    log(`Origin: ${origin}`);
    log(`Destination: ${destination}`);
    log(`Door Move: ${isDoorMove}`);
    
    let finalDestination = destination;
    let truckingData = null;
    
    if (isDoorMove) {
      // Geocode the door address
      log("\\nGeocoding door address...");
      const userCoords = await geocode(destination);
      log(`Coordinates: ${userCoords.lat}, ${userCoords.lon}`);
      
      // Find nearest facility
      const nearestFacility = await findNearestFacility(userCoords);
      log(`\\nNearest facility: ${nearestFacility.name}`);
      log(`Distance: ${nearestFacility.roadMiles.toFixed(1)} mi one-way`);
      
      const roundTripMiles = nearestFacility.roadMiles * 2;
      const truckingCost = calculateTruckingCost(nearestFacility, roundTripMiles);
      
      log(`Round-trip: ${roundTripMiles.toFixed(1)} mi`);
      log(`RPM: $${getRpmFor(nearestFacility.name)}`);
      log(`Trucking cost: $${truckingCost.toFixed(2)}`);
      
      truckingData = {
        facility: nearestFacility.name,
        type: nearestFacility.type,
        miles: roundTripMiles,
        cost: truckingCost
      };
      
      finalDestination = nearestFacility.name;
    }
    
    // Find ocean freight rates
    log(`\\nSearching ocean freight rates: ${origin} â†’ ${finalDestination}`);
    const rates = findOceanRates(origin, finalDestination);
    
    if (!rates) {
      throw new Error(`No ocean freight rates found for ${origin} to ${finalDestination}`);
    }
    
    log("Ocean freight rates found!");
    
    // Display results
    const oceanBody = $("oceanRatesBody");
    oceanBody.innerHTML = "";
    
    EQUIPMENT_TYPES.forEach((type, idx) => {
      const row = oceanBody.insertRow();
      row.insertCell(0).textContent = type;
      row.insertCell(1).textContent = `$${rates[idx].toLocaleString()}`;
    });
    
    if (truckingData) {
      $("facilityName").textContent = truckingData.facility;
      $("facilityType").textContent = truckingData.type;
      $("truckMiles").textContent = truckingData.miles.toFixed(1);
      $("truckCost").textContent = `$${truckingData.cost.toLocaleString()}`;
      
      const totalBody = $("totalRatesBody");
      totalBody.innerHTML = "";
      
      EQUIPMENT_TYPES.forEach((type, idx) => {
        const row = totalBody.insertRow();
        const total = rates[idx] + truckingData.cost;
        row.insertCell(0).textContent = type;
        row.insertCell(1).textContent = `$${rates[idx].toLocaleString()}`;
        row.insertCell(2).textContent = `$${truckingData.cost.toLocaleString()}`;
        row.insertCell(3).textContent = `$${total.toLocaleString()}`;
        row.cells[3].style.fontWeight = "700";
      });
      
      $("truckingSection").style.display = "block";
    } else {
      $("truckingSection").style.display = "none";
    }
    
    $("results").style.display = "block";
    setBadge("Complete", "var(--ok)");
    log("\\nâœ“ Calculation complete");
    
  } catch (error) {
    log(`\\nâœ— ERROR: ${error.message}`);
    setBadge("Error", "var(--err)");
    alert(error.message);
  }
});

$("resetBtn").addEventListener("click", function() {
  $("origin").value = "";
  $("destination").value = "";
  $("doorMove").checked = false;
  $("results").style.display = "none";
  logEl.textContent = "";
  setBadge("Ready", "var(--orange)");
  updateDestinationAutocomplete();
});
</script>
</body>
</html>
